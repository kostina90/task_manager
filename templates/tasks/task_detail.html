<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ task.title }}</title>

    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .current-user {
            text-align: right;
            color: #555;
            font-size: 14px;
        }

        .actions {
            margin-top: 20px;
        }

        .actions a {
            margin-right: 10px;
        }

        .danger {
            color: red;
        }
    </style>
</head>
<body>

<!-- –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -->
<div class="current-user">
    Logged in as: <strong>{{ request.user.username }}</strong>
</div>

<h1>{{ task.title }}</h1>

<hr>

<p>
    <strong>Description:</strong><br>
    {{ task.description }}
</p>

<p>
    <strong>Status:</strong>
    {{ task.get_status_display }}
</p>

<p>
    <strong>Priority:</strong>
    {{ task.get_priority_display }}
</p>

<p>
    <strong>Deadline:</strong>
    {% if task.deadline %}
        {{ task.deadline }}
    {% else %}
        ‚Äî
    {% endif %}
</p>

<p>
    <strong>Creator:</strong>
    {{ task.creator.username }}
</p>
<p>
    <strong>Overdue:</strong>
    {% if task.is_overdue %}
        ‚ùå Yes
    {% else %}
        ‚úîÔ∏è No
    {% endif %}
</p>

<p>
    <strong>Created at:</strong>
    {{ task.created_at }}
</p>

<p>
    <strong>Last updated:</strong>
    {{ task.updated_at }}
</p>

<hr>

<!-- –î–µ–π—Å—Ç–≤–∏—è -->
<div class="actions">
    {% if request.user == task.creator %}
        <a href="{% url 'tasks:task_update' task.pk %}">‚úèÔ∏è Edit</a>
        <a href="{% url 'tasks:task_delete' task.pk %}" class="danger">üóë Delete</a>
        <p>
            <strong>Executors:</strong>
        </p>

        <ul>
            {% for execution in task.executions.all %}
                {{ execution.executor.username }}
                ({{ execution.get_status_display }})

                {% if request.user == task.creator %}
                    <a href="{% url 'tasks:task_executor_delete' execution.pk %}"
                    class="danger">
                        ‚úñ
                    </a>
                {% endif %}

                {% if not forloop.last %}, {% endif %}
            {% empty %}
                ‚Äî
            {% endfor %}

            {% if request.user == task.creator %}
                <p>
                    <a href="{% url 'tasks:task_executor_add' task.pk %}">
                        ‚ûï Add executor
                    </a>
                </p>
            {% endif %}
        </ul>
    {% endif %}
</div>

<hr>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<p>
    <a href="{% url 'tasks:tasks_list' %}">‚Üê Back to tasks</a>
</p>

</body>
</html>
